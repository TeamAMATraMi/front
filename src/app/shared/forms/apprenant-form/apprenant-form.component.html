<h2 mat-dialog-title *ngIf="isUpdateMode">Modifier un apprenant</h2>
<h2 mat-dialog-title *ngIf="!isUpdateMode">Créer un apprenant</h2>

<mat-dialog-content>
    <form novalidate [formGroup]="form">

        <p *ngIf="isUpdateMode">
            <span style="width:100%">{{ form.get('nom').value }} {{ form.get('prenom').value }}</span>
        </p>

        <mat-accordion>
            <mat-expansion-panel expanded>
                <mat-expansion-panel-header>
                    <mat-panel-title>Profil</mat-panel-title>
                </mat-expansion-panel-header>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Nom" formControlName="nom" minlength="2" required name="nom" />
                        <mat-error *ngIf="form.get('nom').dirty && form.get('nom').hasError('required')">
                            nom est <strong>requis</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('nom').dirty && form.get('nom').hasError('minlength')">
                            min <strong>2 lettres</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Prénom" formControlName="prenom" minlength="2" required name="prenom" />
                        <mat-error *ngIf="form.get('prenom').dirty && form.get('prenom').hasError('required')">
                            prenom est <strong>requis</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('prenom').dirty && form.get('prenom').hasError('minlength')">
                            min <strong>2 lettres</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Adresse" formControlName="adresse" minlength="3" maxlength="255" required name="adresse" />
                        <mat-error *ngIf="form.get('adresse').dirty && form.get('adresse').hasError('required')">
                            adresse est <strong>requis</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('adresse').dirty && form.get('adresse').hasError('minlength')">
                            min <strong>3 characteres</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Code postal" formControlName="codePostal" required name="codePostal" />
                        <mat-error *ngIf="form.get('codePostal').dirty && form.get('codePostal').hasError('required')">
                            codePostal est <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('codePostal').dirty && form.get('codePostal').hasError('pattern')">
                            nécessite <strong> 5 chiffres</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Commune" formControlName="commune" minlength="2" required name="commune" />
                        <mat-error *ngIf="form.get('commune').dirty && form.get('commune').hasError('required')">
                            commune est <strong>requis</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('commune').dirty && form.get('commune').hasError('minlength')">
                            minimum <strong>2 characteres</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Téléphone" formControlName="telephone" required name="telephone" />
                        <mat-error *ngIf="form.get('telephone').dirty && form.get('telephone').hasError('required')">
                            telephone est <strong>requis</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('telephone').dirty && form.get('telephone').hasError('pattern')">
                            Ceci n'est pas un <strong>numéro français</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput type="date" placeholder="Date de naissance" formControlName="dateNaissance" required name="dateNaissance" />
                        <mat-error *ngIf="form.get('dateNaissance').dirty && form.get('dateNaissance').hasError('required')">
                            dateNaissance is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('dateNaissance').dirty && form.get('dateNaissance').hasError('pattern')">
                            Date de type <strong>JJ/MM/YYYY</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Majeur" formControlName="majeur" required name="majeur" />
                        <mat-error *ngIf="form.get('majeur').dirty && form.get('majeur').hasError('required')">
                            majeur is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Genre" formControlName="genre" required name="genre" />
                        <mat-error *ngIf="form.get('genre').dirty && form.get('genre').hasError('required')">
                            genre is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>Informations</mat-panel-title>
                </mat-expansion-panel-header>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput type="date" placeholder="Date d'inscription" formControlName="dateInscription" required name="dateInscription" />
                        <mat-error *ngIf="form.get('dateInscription').dirty && form.get('dateInscription').hasError('required')">
                            dateInscription is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('dateInscription').dirty && form.get('dateInscription').hasError('pattern')">
                            Date de type <strong>JJ/MM/YYYY</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Pays d'origine" formControlName="paysOrigine" required name="paysOrigine" />
                        <mat-error *ngIf="form.get('paysOrigine').dirty && form.get('paysOrigine').hasError('required')">
                            paysOrigine is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Nationalité" formControlName="nationalite" required name="nationalite" />
                        <mat-error *ngIf="form.get('nationalite').dirty && form.get('nationalite').hasError('required')">
                            nationalite is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput type="date" placeholder="Date d'arrivée" formControlName="dateArrivee" required name="dateArrivee" />
                        <mat-error *ngIf="form.get('dateArrivee').dirty && form.get('dateArrivee').hasError('required')">
                            dateArrivee is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('dateArrivee').dirty && form.get('dateArrivee').hasError('pattern')">
                            Date de type <strong>JJ/MM/YYYY</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Situation personnelle" formControlName="situationPersonnelle" required name="situationPersonnelle" />
                        <mat-error *ngIf="form.get('situationPersonnelle').dirty && form.get('situationPersonnelle').hasError('required')">
                            situationPersonnelle is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>Scolarité</mat-panel-title>
                </mat-expansion-panel-header>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Temps de scolarisation" formControlName="tempsScolarisation" required name="tempsScolarisation" />
                        <mat-error *ngIf="form.get('tempsScolarisation').dirty && form.get('tempsScolarisation').hasError('required')">
                            tempsScolarisation is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Diplôme" formControlName="diplome" required name="diplome" />
                        <mat-error *ngIf="form.get('diplome').dirty && form.get('diplome').hasError('required')">
                            diplome is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Milieu scolaire" formControlName="milieuScolaire" required name="milieuScolaire" />
                        <mat-error *ngIf="form.get('milieuScolaire').dirty && form.get('milieuScolaire').hasError('required')">
                            milieuScolaire is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Niveau de langue" formControlName="niveauLangue" required name="niveauLangue" />
                        <mat-error *ngIf="form.get('niveauLangue').dirty && form.get('niveauLangue').hasError('required')">
                            niveauLangue is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Sait lire dans sa langue" formControlName="lireLangue" required name="lireLangue" />
                        <mat-error *ngIf="form.get('lireLangue').dirty && form.get('lireLangue').hasError('required')">
                            lireLangue is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Sait écrire dans sa langue" formControlName="ecrireLangue" required name="ecrireLangue" />
                        <mat-error *ngIf="form.get('ecrireLangue').dirty && form.get('ecrireLangue').hasError('required')">
                            ecrireLangue is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Sait lire l'alphabet latin" formControlName="lireAlphaLatin" required name="lireAlphaLatin" />
                        <mat-error *ngIf="form.get('lireAlphaLatin').dirty && form.get('lireAlphaLatin').hasError('required')">
                            lireAlphaLatin is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Sait écrire l'alphabet latin" formControlName="ecrireAlphaLatin" required name="ecrireAlphaLatin" />
                        <mat-error *ngIf="form.get('ecrireAlphaLatin').dirty && form.get('ecrireAlphaLatin').hasError('required')">
                            ecrireAlphaLatin is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
            </mat-expansion-panel>

            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>Autres</mat-panel-title>
                </mat-expansion-panel-header>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="ID du groupe" formControlName="idGroupe" required name="idGroupe" />
                        <mat-error *ngIf="form.get('idGroupe').dirty && form.get('idGroupe').hasError('required')">
                            idGroupe is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Auteur du dossier" formControlName="auteurDossier" required name="auteurDossier" />
                        <mat-error *ngIf="form.get('auteurDossier').dirty && form.get('auteurDossier').hasError('required')">
                            auteurDossier is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Quartier prioritaire" formControlName="quartierPrioritaire" name="quartierPrioritaire" />
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Prise en charge" formControlName="priseCharge" required name="priseCharge" />
                        <mat-error *ngIf="form.get('priseCharge').dirty && form.get('priseCharge').hasError('required')">
                            priseCharge is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="RSA" formControlName="rsa" required name="rsa" />
                        <mat-error *ngIf="form.get('rsa').dirty && form.get('rsa').hasError('required')">
                            rsa is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Cotisation" formControlName="cotisationPayee" required name="cotisationPayee" />
                        <mat-error *ngIf="form.get('cotisationPayee').dirty && form.get('cotisationPayee').hasError('required')">
                            cotisationPayee is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </p>
                <p>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Remarques" formControlName="remarques" name="remarques" />
                    </mat-form-field>
                </p>
            </mat-expansion-panel>

        </mat-accordion>

    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button type="button" (click)="cancel()">Cancel</button>
    <button mat-button color="primary" type="submit" (click)="submit(form.value)" [disabled]="form.invalid">Save</button>
</mat-dialog-actions>
